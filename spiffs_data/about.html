<html>

<link href="/style.css" rel="stylesheet">

<style type="text/css"></style>





<head>
    <meta charset="utf-8">
    <title>ESP32 is cool MK!</title>
</head>

<body>
    
    <div class="global_wrapper">
        <div class="header">
            <H1>ESP32 CONTROLLER</H1>
        </div>
        <div class="common_block">
            <div class="left_bar">
                <ul>
                    <li><a href="/wifi_settings">WIFI SETTINGS</a></li>
                    <li><a href="/data">DATA</a></li>
                    <li><a href="/about">ABOUT</a></li>
                </ul>
            </div>

            <div class="right_big_bar">
                <div>MODEL OF ESP: <label id="model">undefined</label></div>
                <div>FLESH: <label id="flash_size">undefined</label></div>
                <div>PSRAM:-------------</div>
                <div>FREE HEAP: <label id="free_heap">undefined</label></div>
                <div>--------------------------------------------------</div>
                <p ><label id="text_about_ap">!!!NOW AP WORK</label></p>
                <div><button>STOP AP</button></div>

            </div>
        </div>
    </div>

    <script>
        var para = document.querySelector("p");

        //var para = document.getElementById('text_about_ap').innerHTML;

        function add_text_about_ap() {
            const AP = 'true';
            
            if (AP === 'true') {
                para.textContent="kjhhkhkgk";
                
                console.log("!!add text ap");
            } 
        }




        function sendPostToEsp() {
            fetch('/post/json', {
                method: 'POST',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ "id": 78912 })
            })
                .then(response => response.json())
                .then(response => console.log(JSON.stringify(response)))
        }

        function getAboutJsonEsp() {
            fetch('/about_json', {
                method: 'GET',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
            })
                .then(response => response.json())
                .then(response => {
                    console.log("TEST");
                    var json = JSON.stringify(response);
                    var about = JSON.parse(json);
                    console.log("TEST");
                    console.log(about);
                    document.getElementById('model').innerHTML = about.model;
                    document.getElementById('flash_size').innerHTML = about.flash_size;
                    document.getElementById('free_heap').innerHTML = about.free_heap;
                })



        }

        function onClickFunction() {
            alert("I am an alert box!");
            fetch("/json")
                .then((response) => {
                    return response.json();
                })
                .then((data) => {
                    console.log(data);
                    document.getElementById('data').value = data.message;

                    ;
                })


        }
        add_text_about_ap();
        getAboutJsonEsp();

    </script>
</body>

</html>